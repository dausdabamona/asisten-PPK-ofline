# PPK DOCUMENT FACTORY v5.0
## SYSTEM DESIGN DOCUMENT
### Pengadaan Barang/Jasa Pemerintah Indonesia

---

## 1. WORKFLOW DIAGRAM (SWIMLANE)

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                    LIFECYCLE PENGADAAN BARANG/JASA                                              │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │ FASE A: PERSIAPAN PENGADAAN (PPK)                                                                       │   │
│  │ ════════════════════════════════════════════════════════════════════════════════════════════════════   │   │
│  │                                                                                                         │   │
│  │  [START] ──► [1.SPESIFIKASI/KAK] ──► [2.VOLUME] ──► [3.SURVEY HARGA] ──► [4.RAB] ──► [5.HPS]           │   │
│  │                    │                      │               │                  │          │               │   │
│  │                    ▼                      ▼               ▼                  ▼          ▼               │   │
│  │              ┌──────────┐          ┌──────────┐    ┌───────────┐      ┌────────┐  ┌─────────┐           │   │
│  │              │ Dok:     │          │ Item BOQ │    │ Min 3     │      │ Auto   │  │ LOCKED  │           │   │
│  │              │ - KAK    │          │ Lengkap  │    │ Sumber    │      │ Hitung │  │ sampai  │           │   │
│  │              │ - Spek   │          │          │    │ Harga     │      │ dari   │  │ Survey  │           │   │
│  │              │ Teknis   │          │          │    │           │      │ Survey │  │ Valid   │           │   │
│  │              └──────────┘          └──────────┘    └───────────┘      └────────┘  └─────────┘           │   │
│  │                                                                                       │                 │   │
│  │                                                                                       ▼                 │   │
│  │  [6.RANCANGAN KONTRAK] ──► [7.NOTA DINAS KE PP] ──► [STATUS: SIAP PEMILIHAN]                           │   │
│  │         │                          │                        │                                           │   │
│  │         ▼                          ▼                        ▼                                           │   │
│  │   ┌───────────┐            ┌─────────────┐          ┌──────────────┐                                    │   │
│  │   │ - SSUK    │            │ Permohonan  │          │ ⚠️ PENYEDIA   │                                    │   │
│  │   │ - SSKK    │            │ Pemilihan   │          │   TERKUNCI   │                                    │   │
│  │   │ - Draft   │            │ Penyedia    │          │ ⚠️ KONTRAK    │                                    │   │
│  │   │   SPK     │            │             │          │   TERKUNCI   │                                    │   │
│  │   └───────────┘            └─────────────┘          └──────────────┘                                    │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                          │                                                     │
│                                                          ▼                                                     │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │ FASE B: PEMILIHAN PENYEDIA (PEJABAT PENGADAAN / POKJA)                                                  │   │
│  │ ════════════════════════════════════════════════════════════════════════════════════════════════════   │   │
│  │                                                                                                         │   │
│  │  [TERIMA NOTA DINAS] ──► [UNDANGAN] ──► [EVALUASI] ──► [NEGOSIASI] ──► [BAHP PEMILIHAN]                │   │
│  │         │                    │              │              │                │                           │   │
│  │         ▼                    ▼              ▼              ▼                ▼                           │   │
│  │   ┌───────────┐       ┌──────────┐   ┌──────────┐   ┌──────────┐    ┌─────────────┐                     │   │
│  │   │ Verifikasi│       │ Pengumuman│   │ Admin   │   │ Harga    │    │ Penetapan   │                     │   │
│  │   │ HPS &     │       │ atau      │   │ Teknis  │   │ Terkoreksi│   │ Penyedia    │                     │   │
│  │   │ Kelengkap-│       │ Undangan  │   │ Harga   │   │ = NILAI  │    │ Terpilih    │                     │   │
│  │   │ an Dok    │       │ Langsung  │   │         │   │ KONTRAK  │    │             │                     │   │
│  │   └───────────┘       └──────────┘   └──────────┘   └──────────┘    └─────────────┘                     │   │
│  │                                                                            │                            │   │
│  │  [SURAT PENETAPAN PENYEDIA] ◄──────────────────────────────────────────────┘                            │   │
│  │         │                                                                                               │   │
│  │         ▼                                                                                               │   │
│  │   ┌─────────────────────────────┐                                                                       │   │
│  │   │ ✅ PENYEDIA TERBUKA          │                                                                       │   │
│  │   │ ✅ NILAI KONTRAK = NEGOSIASI │                                                                       │   │
│  │   │ ✅ MODUL KONTRAK AKTIF       │                                                                       │   │
│  │   └─────────────────────────────┘                                                                       │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                          │                                                     │
│                                                          ▼                                                     │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │ FASE C: KONTRAK (PPK + PENYEDIA)                                                                        │   │
│  │ ════════════════════════════════════════════════════════════════════════════════════════════════════   │   │
│  │                                                                                                         │   │
│  │  [DRAFT KONTRAK] ──► [REVIEW PPK] ──► [TANDATANGAN SPK/PERJANJIAN] ──► [SPMK] ──► [KONTRAK AKTIF]      │   │
│  │        │                  │                    │                          │              │              │   │
│  │        ▼                  ▼                    ▼                          ▼              ▼              │   │
│  │  ┌───────────┐     ┌───────────┐        ┌───────────┐              ┌───────────┐  ┌───────────┐         │   │
│  │  │ Nilai =   │     │ Validasi: │        │ Dok:      │              │ Tanggal   │  │ Jaminan   │         │   │
│  │  │ Harga     │     │ Tgl > Tgl │        │ - SPK     │              │ Mulai     │  │ Pelaksana-│         │   │
│  │  │ Negosiasi │     │ Penetapan │        │ - SSUK    │              │ Kerja     │  │ an (jika  │         │   │
│  │  │ (LOCKED)  │     │ Penyedia  │        │ - SSKK    │              │           │  │ diperlukan│         │   │
│  │  └───────────┘     └───────────┘        └───────────┘              └───────────┘  └───────────┘         │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                          │                                                     │
│                                                          ▼                                                     │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │ FASE D: PELAKSANAAN & ADENDUM (PPK + PENYEDIA)                                                          │   │
│  │ ════════════════════════════════════════════════════════════════════════════════════════════════════   │   │
│  │                                                                                                         │   │
│  │  [PELAKSANAAN PEKERJAAN] ──► [MONITORING PROGRESS] ──► [PERUBAHAN?] ──► [ADENDUM]                      │   │
│  │         │                           │                       │              │                            │   │
│  │         ▼                           ▼                       ▼              ▼                            │   │
│  │   ┌───────────┐             ┌───────────┐            ┌───────────┐  ┌───────────┐                       │   │
│  │   │ Laporan   │             │ % Progress│            │ Justifikasi│  │ Adendum   │                       │   │
│  │   │ Kemajuan  │             │ Pekerjaan │            │ Perubahan │  │ Kontrak   │                       │   │
│  │   │ Pekerjaan │             │           │            │ CCO       │  │ (Waktu/   │                       │   │
│  │   │           │             │           │            │           │  │ Volume/   │                       │   │
│  │   │           │             │           │            │           │  │ Nilai)    │                       │   │
│  │   └───────────┘             └───────────┘            └───────────┘  └───────────┘                       │   │
│  │                                                                                                         │   │
│  │  ⚠️ ADENDUM hanya jika KONTRAK AKTIF                                                                    │   │
│  │  ⚠️ Nomor Adendum Auto-Increment                                                                        │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                          │                                                     │
│                                                          ▼                                                     │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │ FASE E: PEMERIKSAAN & SERAH TERIMA (PPHP + PPK + PENYEDIA)                                              │   │
│  │ ════════════════════════════════════════════════════════════════════════════════════════════════════   │   │
│  │                                                                                                         │   │
│  │  [PEKERJAAN 100%] ──► [PEMERIKSAAN PPHP] ──► [BAHP] ──► [SESUAI?] ──YES──► [BAST]                       │   │
│  │         │                    │                 │           │                  │                         │   │
│  │         ▼                    ▼                 ▼           │NO               ▼                         │   │
│  │   ┌───────────┐       ┌───────────┐     ┌───────────┐     │          ┌───────────┐                     │   │
│  │   │ Laporan   │       │ Checklist │     │ Berita    │     │          │ Serah     │                     │   │
│  │   │ Penyele-  │       │ Pemerik-  │     │ Acara     │     │          │ Terima    │                     │   │
│  │   │ saian     │       │ saan      │     │ Hasil     │     ▼          │ Hasil     │                     │   │
│  │   │ Pekerjaan │       │           │     │ Pemerik-  │ [BA PERBAIKAN] │ Pekerjaan │                     │   │
│  │   │           │       │           │     │ saan      │     │          │           │                     │   │
│  │   └───────────┘       └───────────┘     └───────────┘     │          └───────────┘                     │   │
│  │                                                           ▼                                             │   │
│  │                                               [PERBAIKAN] ──► [PEMERIKSAAN ULANG]                       │   │
│  │                                                                                                         │   │
│  │  ⚠️ BAST TERKUNCI sebelum BAHP                                                                          │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                          │                                                     │
│                                                          ▼                                                     │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │ FASE F: PEMBAYARAN (PPK + PPSPM + BENDAHARA + KPA)                                                      │   │
│  │ ════════════════════════════════════════════════════════════════════════════════════════════════════   │   │
│  │                                                                                                         │   │
│  │  [BAST] ──► [KUITANSI] ──► [SSP/PAJAK] ──► [SPP-LS] ──► [SPM] ──► [SP2D] ──► [SELESAI]                 │   │
│  │    │            │              │              │           │          │            │                     │   │
│  │    ▼            ▼              ▼              ▼           ▼          ▼            ▼                     │   │
│  │ ┌──────┐   ┌──────────┐  ┌──────────┐   ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐                 │   │
│  │ │TRIGGER│   │ Nilai =  │  │ PPh 22/  │   │ PPSPM   │ │ Verifi- │ │ KPPN /  │ │ Arsip & │                 │   │
│  │ │ Bayar │   │ Kontrak  │  │ 23/21/   │   │ Approve │ │ kasi    │ │ Bank    │ │ Laporan │                 │   │
│  │ │       │   │ Final    │  │ 4(2)     │   │         │ │ KPA     │ │         │ │         │                 │   │
│  │ └──────┘   └──────────┘  │ PPN 11%  │   └─────────┘ └─────────┘ └─────────┘ └─────────┘                 │   │
│  │                          └──────────┘                                                                   │   │
│  │                                                                                                         │   │
│  │  ⚠️ PEMBAYARAN TERKUNCI sebelum BAST                                                                    │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 2. STATE MACHINE DIAGRAM

```
                                    ┌─────────────────────────────────────────────────────────────────┐
                                    │                    PAKET STATE MACHINE                          │
                                    └─────────────────────────────────────────────────────────────────┘

    ┌──────────┐                                                                              
    │  DRAFT   │                                                                              
    └────┬─────┘                                                                              
         │ create_paket()                                                                     
         ▼                                                                                    
    ┌──────────────────┐      complete_spek()     ┌──────────────────┐                        
    │   SPES